import discord
from discord.ext import commands
import yt_dlp as youtube_dl
from discord.utils import get
import asyncio

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π –¥–ª—è –±–æ—Ç–∞
intents = discord.Intents.default()
intents.message_content = True  # –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π
bot = commands.Bot(command_prefix='-', intents=intents)

DISCORD_TOKEN = None # –£–∫–∞–∂–∏—Ç–µ –í–∞—à discord_token

FFMPEG_PATH = None  # –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É ffmpeg'—É

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è youtube_dl
YDL_OPTIONS = {
    'format': 'bestaudio',  # –ó–∞–≥—Ä—É–∑–∫–∞ –ª—É—á—à–µ–≥–æ –∞—É–¥–∏–æ —Ñ–æ—Ä–º–∞—Ç–∞
    'noplaylist': True,  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
    'quiet': True,  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    'no_warnings': True,  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
    'default_search': 'auto',  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤–∏–¥–µ–æ
    'source_address': '0.0.0.0'  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ IPv4
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è ffmpeg
FFMPEG_OPTIONS = {
    'before_options': '-reconnect 1 -reconnect_streamed 1 -reconnect_delay_max 5',  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    'options': '-vn'  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ
}

queue = []  # –û—á–µ—Ä–µ–¥—å —Ç—Ä–µ–∫–æ–≤
current_song = None  # –¢–µ–∫—É—â–∏–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π —Ç—Ä–µ–∫
bot_messages = []  # –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
repeat_mode = 0  # 0 - –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–∞, 1 - –ø–æ–≤—Ç–æ—Ä –≤—Å–µ–π –æ—á–µ—Ä–µ–¥–∏, 2 - –ø–æ–≤—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞

@bot.event
async def on_ready():
    """
    –§—É–Ω–∫—Ü–∏—è, –≤—ã–∑—ã–≤–∞–µ–º–∞—è –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞.
    """
    print(f'–í–æ—à–µ–ª –∫–∞–∫ {bot.user.name}')  # –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å

async def delete_messages():
    """
    –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —É–¥–∞–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    """
    for message in bot_messages:  # –ü—Ä–æ—Ö–æ–¥ –ø–æ –≤—Å–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è–º –≤ —Å–ø–∏—Å–∫–µ
        try:
            await message.delete()  # –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
        except discord.errors.NotFound:
            pass  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
    bot_messages.clear()  # –û—á–∏—Å—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

async def play_next(ctx: commands.Context) -> None:
    """
    –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–∫ –≤ –æ—á–µ—Ä–µ–¥–∏.
    """
    global current_song, repeat_mode
    #asyncio.create_task(delete_messages())  # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —Ç—Ä–µ–∫–∞

    if repeat_mode == 2 and current_song:  # –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –ø–æ–≤—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        queue.insert(0, current_song)  # –í—Å—Ç–∞–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞ –≤ –Ω–∞—á–∞–ª–æ –æ—á–µ—Ä–µ–¥–∏
    elif repeat_mode == 1 and current_song:  # –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –ø–æ–≤—Ç–æ—Ä –≤—Å–µ–π –æ—á–µ—Ä–µ–¥–∏
        queue.append(current_song)  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞ –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏

    if len(queue) > 0:  # –ï—Å–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –µ—Å—Ç—å —Ç—Ä–µ–∫–∏
        current_song = queue.pop(0)  # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç—Ä–µ–∫–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
        voice_client = get(bot.voice_clients, guild=ctx.guild)  # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        if voice_client is None:  # –ï—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
            voice_channel = ctx.message.author.voice.channel  # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –∞–≤—Ç–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
            voice_client = await voice_channel.connect()  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—É

        def after_playing(error):
            """
            –§—É–Ω–∫—Ü–∏—è, –≤—ã–∑—ã–≤–∞–µ–º–∞—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ç—Ä–µ–∫–∞.
            """
            if error:
                print(f"–û—à–∏–±–∫–∞: {error}")  # –í—ã–≤–æ–¥ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞
            bot.loop.create_task(play_next(ctx))  # –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç—Ä–µ–∫–∞

        try:
            print(f"–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ URL: {current_song['audio_url']}")  # –í—ã–≤–æ–¥ URL —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
            # –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ffmpeg
            voice_client.play(discord.FFmpegPCMAudio(current_song['audio_url'], executable=FFMPEG_PATH, **FFMPEG_OPTIONS), after=after_playing)
            msg = await ctx.send(f"–°–µ–π—á–∞—Å –∏–≥—Ä–∞–µ—Ç: {current_song['title']} üé∂")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–µ–∫—É—â–µ–º —Ç—Ä–µ–∫–µ
            bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
        except discord.errors.ClientException as e:
            msg = await ctx.send(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞—É–¥–∏–æ: {e}")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
            bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
        except Exception as e:
            msg = await ctx.send(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–µ
            bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    else:
        current_song = None  # –°–±—Ä–æ—Å —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        asyncio.create_task(delete_messages())  # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤
        voice_client = get(bot.voice_clients, guild=ctx.guild)  # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        if voice_client and voice_client.is_connected():  # –ï—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω
            await voice_client.disconnect()  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞

@bot.command(name='play', help='–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—É–∑—ã–∫–∏ —Å YouTube')
async def play(ctx: commands.Context, url: str) -> None:
    """
    –î–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–µ–∫ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞.
    """
    bot_messages.append(ctx.message)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    with youtube_dl.YoutubeDL(YDL_OPTIONS) as ydl:  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ youtube_dl –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–µ
        try:
            info = ydl.extract_info(url, download=False)  # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏
            audio_url = info['url']  # –ü–æ–ª—É—á–µ–Ω–∏–µ URL –∞—É–¥–∏–æ
            title = info['title']  # –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç—Ä–µ–∫–∞
            queue.append({'title': title, 'audio_url': audio_url})  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å
            msg = await ctx.send(f"–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å: {title} üéµ")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–∞
            bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
            if current_song is None:  # –ï—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
                await play_next(ctx)  # –ù–∞—á–∞–ª–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        except Exception as e:
            msg = await ctx.send(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {e}")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
            bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

@bot.command(name='skip', help='–ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–∫')
async def skip(ctx: commands.Context) -> None:
    """
    –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π —Ç—Ä–µ–∫ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π.
    """
    bot_messages.append(ctx.message)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    voice_client = ctx.message.guild.voice_client  # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
    if voice_client.is_playing():  # –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —Ç—Ä–µ–∫
        voice_client.stop()  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        msg = await ctx.send("–ü—Ä–æ–ø—É—â–µ–Ω–æ ‚è≠")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–ø—É—Å–∫–µ —Ç—Ä–µ–∫–∞
        bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    else:
        msg = await ctx.send("–°–µ–π—á–∞—Å –Ω–∏—á–µ–≥–æ –Ω–µ –∏–≥—Ä–∞–µ—Ç.")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
        bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

@bot.command(name='stop', help='–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏ –æ—á–∏—â–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å')
async def stop(ctx: commands.Context) -> None:
    """
    –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–∫, –æ—á–∏—â–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –±–æ—Ç–∞ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞.
    """
    global queue, current_song
    bot_messages.append(ctx.message)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    queue = []  # –û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏
    current_song = None  # –°–±—Ä–æ—Å —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
    voice_client = ctx.message.guild.voice_client  # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
    if voice_client.is_playing():  # –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —Ç—Ä–µ–∫
        voice_client.stop()  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
        msg = await ctx.send("–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ‚èπ")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
        bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    if voice_client.is_connected():  # –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω
        await voice_client.disconnect()  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
    asyncio.create_task(delete_messages())  # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

@bot.command(name='repeat', help='–£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º–æ–º –ø–æ–≤—Ç–æ—Ä–∞')
async def repeat(ctx: commands.Context) -> None:
    """
    –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º–æ–º –ø–æ–≤—Ç–æ—Ä–∞: –æ—á–µ—Ä–µ–¥—å -> —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–∫ -> –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–∞.
    """
    global repeat_mode
    bot_messages.append(ctx.message)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    repeat_mode = (repeat_mode + 1) % 3  # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø–æ–≤—Ç–æ—Ä–∞
    if repeat_mode == 0:
        msg = await ctx.send("–ü–æ–≤—Ç–æ—Ä –æ—Ç–∫–ª—é—á–µ–Ω ‚ùå")  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ–≤—Ç–æ—Ä–∞
    elif repeat_mode == 1:
        msg = await ctx.send("–ü–æ–≤—Ç–æ—Ä –≤—Å–µ–π –æ—á–µ—Ä–µ–¥–∏ üîÅ")  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–≤—Ç–æ—Ä–µ –≤—Å–µ–π –æ—á–µ—Ä–µ–¥–∏
    elif repeat_mode == 2:
        msg = await ctx.send("–ü–æ–≤—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞ üîÇ")  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–≤—Ç–æ—Ä–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞
    bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

@bot.command(name='queue', help='–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –æ—á–µ—Ä–µ–¥—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è')
async def show_queue(ctx: commands.Context) -> None:
    """
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –æ—á–µ—Ä–µ–¥—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.
    """
    bot_messages.append(ctx.message)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    if len(queue) == 0:  # –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞
        msg = await ctx.send("–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞.")  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—É—Å—Ç–æ–π –æ—á–µ—Ä–µ–¥–∏
        bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
    else:
        # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–∫–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏
        queue_list = "\n".join([f"{index + 1}. {song['title']}" for index, song in enumerate(queue)])
        msg = await ctx.send(f"–¢–µ–∫—É—â–∞—è –æ—á–µ—Ä–µ–¥—å:\n{queue_list}")  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ—á–µ—Ä–µ–¥—å—é
        bot_messages.append(msg)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

bot.run(DISCORD_TOKEN)